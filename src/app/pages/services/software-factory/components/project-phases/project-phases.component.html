<div class="flex justify-center pt-10">
  <h1 class="text-3xl sm:text-5xl text-center font-bold text-[#1e4a98] mb-4">
    Project Phases
  </h1>
</div>
<div class="hidden lg:flex flex-col justify-center items-center relative">
  <!-- <div
    class="absolute bg-gray-50 w-4/5 rounded-xl shadow-lg h-full z-0"
  ></div> -->

  <div class="flex z-1">
    <div
      step="1"
      [ngClass]="{
        ' duration-200 cursor-pointer rounded-tl-2xl rounded-tr-2xl z-10 filter': true,
        'translate-x-[34px]': steps() === 3,
        'translate-x-[0px]': steps() === 2,
        'translate-x-[34px] bg-gray-100 z-0': steps() === 1,
        'translate-x-[67px]': [0, 4, 5].includes(steps()),
        'opacity-50': steps() !== 1 && steps() !== 0,
      }"
      (click)="selectStep(1)"
    >
      <div
        class="bg-primary-300 rounded-lg m-6 p-2 h-32 w-32 flex justify-center items-center"
      >
        <icon-user-group-animation class="w-3/5 h-3/5 fill-white" />
      </div>
    </div>
    <div
      step="2"
      [ngClass]="{
        'duration-200 cursor-pointer filter rounded-tl-2xl rounded-tr-2xl': true,
        'translate-x-[0px]': steps() === 3,
        'translate-x-[0px] bg-gray-100 z-0': steps() === 2,
        'translate-x-[34px]': [0, 1, 4, 5].includes(steps()),
        'opacity-50': steps() !== 2 && steps() !== 0
      }"
      (click)="selectStep(2)"
    >
      <div
        class="bg-primary-400 rounded-lg m-6 p-2 h-32 w-32 flex justify-center items-center"
      >
        <icon-board-animation class="w-3/5 h-3/5 fill-white" />
      </div>
    </div>
    <div
      step="3"
      [ngClass]="{
        ' duration-200 cursor-pointer z-10 filter rounded-tl-2xl rounded-tr-2xl': true,
        'bg-gray-100 z-0': steps() === 3,
        'opacity-50': steps() !== 3 && steps() !== 0
      }"
      (click)="selectStep(3)"
    >
      <div
        class="bg-primary-500 fill-primary-100 rounded-lg m-6 p-2 h-32 w-32 flex justify-center items-center"
      >
        <icon-tools-animation class="w-3/5 h3/5 fill-white" />
      </div>
    </div>
    <div
      step="4"
      [ngClass]="{
        'duration-200 cursor-pointer z-10 filter rounded-tl-2xl rounded-tr-2xl': true,
        'translate-x-[0px]': steps() === 3,
        'translate-x-[0px] bg-gray-100 z-0': steps() === 4,
        'translate-x-[-31px]': [0, 1, 2, 5].includes(steps()),
        'opacity-50': steps() !== 4 && steps() !== 0
      }"
      (click)="selectStep(4)"
    >
      <div
        class="bg-primary-600 rounded-lg m-6 p-2 h-32 w-32 flex justify-center items-center"
      >
        <icon-gears-animation class="w-3/5 h-3/5 fill-white" />
      </div>
    </div>
    <div
      step="5"
      [ngClass]="{
        'duration-200 cursor-pointer z-10 rounded-tr-2xl rounded-tl-2xl': true,
        'translate-x-[-34px]': steps() === 3,
        'translate-x-[0px]': steps() === 4,
        'bg-gray-100 z-0 translate-x-[-34px]': steps() === 5,
        'translate-x-[-65px]': [0, 1, 2].includes(steps()),
        'opacity-50': steps() !== 5 && steps() !== 0
      }"
      (click)="selectStep(5)"
    >
      <div
        class="bg-primary-700 rounded-lg m-6 p-2 h-32 w-32 flex justify-center items-center"
      >
        <icon-box-animation class="w-3/5 h-3/5 fill-primary-700 stroke-white" />
      </div>
    </div>
  </div>
  <div
    class="flex w-full relative items-center justify-center bg-gray-100 p-8 rounded transition-all"
  >
    <icon-circuit
      class="w-16 h-auto absolute left-0 top-4 rotate-180 fill-primary-700"
    />
    <icon-circuit
      class="w-16 h-auto absolute right-0 bottom-4 fill-primary-600"
    />
    @if(steps() === 0) {
    <div class="flex justify-center">
      <div
        class="bg-white flex items-center max-w-[400px] rounded-2xl text-xl font-thin shadow-lg p-8 whitespace-normal"
      >
        <p class="">
          Our project management process is structured in these 5 phases and
          each one has key tasks
        </p>
      </div>
    </div>
    }@else {
    <div class="flex flex-col items-center mr-4">
      <h2
        class="rounded-lg text-4xl bg-gray-50 px-3 py-1.5 relative z-10 font-medium text-secondary-500"
      >
        Phase {{ steps() }}
      </h2>
      <h3 class="mt-3 text-2xl text-gray-500">{{ phases[steps()].title }}:</h3>
    </div>
    <div class="grid grid-cols-4 gap-4">
      @for (keypoint of phases[steps()].keyPoints; track $index) {
      <div
        class="bg-white flex items-center col-span-1 rounded-2xl text-xl font-thin shadow-lg p-6 h-full w-auto max-w-[175px] break-words whitespace-normal"
      >
        <p>{{ keypoint }}</p>
      </div>

      }
    </div>
    }
  </div>
</div>
<div
  class="relative flex lg:hidden items-center sm:justify-center px-[4%] sm:px-[10%] h-full"
>
  <div class="flex flex-col lg:hidden relative w-[100px] sm:w-[152px]">
    <div
      [ngClass]="{
        ' duration-200 cursor-pointer rounded-tl-2xl rounded-bl-2xl z-10 filter': true,
        'translate-y-[16px] sm:translate-y-[28px]': steps() === 3,
        'translate-y-[0px]': steps() === 2,
        'translate-y-[18px] sm:translate-y-[28px] bg-gray-100 z-0': steps() === 1,
        'translate-y-[32px] sm:translate-y-[52px]': [0, 4, 5].includes(steps()),
        'opacity-50': steps() !== 1 && steps() !== 0,
      }"
      (click)="selectStep(1)"
    >
      <div
        class="bg-primary-300 rounded-l-lg my-6 ml-6 p-2 sm:h-32 sm:w-32 flex justify-center items-center"
      >
        <icon-user-group-animation class="w-3/5 h-3/5 fill-white" />
      </div>
    </div>
    <div
      [ngClass]="{
        'duration-200 cursor-pointer filter rounded-tl-2xl rounded-bl-2xl': true,
        'translate-y-[16px] sm:translate-y-[2px]': steps() === 3,
        'translate-y-[0px] bg-gray-100 z-0': steps() === 2,
        'translate-y-[16px] sm:translate-y-[26px]': [0, 1, 4, 5].includes(
          steps()
        ),
        'opacity-50': steps() !== 2 && steps() !== 0
      }"
      (click)="selectStep(2)"
    >
      <div
        class="bg-primary-400 rounded-l-lg my-6 ml-6 p-2 sm:h-32 sm:w-32 flex justify-center items-center"
      >
        <icon-board-animation class="w-3/5 h-3/5 fill-white" />
      </div>
    </div>
    <div
      [ngClass]="{
        ' duration-200 cursor-pointer z-10 filter rounded-tl-2xl rounded-bl-2xl': true,
        'bg-gray-100 z-0': steps() === 3,
        'opacity-50': steps() !== 3 && steps() !== 0
      }"
      (click)="selectStep(3)"
    >
      <div
        class="bg-primary-500 fill-primary-100 rounded-l-lg my-6 ml-6 p-2 sm:h-32 sm:w-32 flex justify-center items-center"
      >
        <icon-tools-animation class="w-3/5 h3/5 fill-white" />
      </div>
    </div>
    <div
      [ngClass]="{
        'duration-200 cursor-pointer z-10 filter rounded-tl-2xl rounded-bl-2xl': true,
        'translate-y-[0px]': steps() === 3,
        'translate-y-[0px] bg-gray-100 z-0': steps() === 4,
        'translate-y-[-15px] sm:translate-y-[-24px]': [0, 1, 2, 5].includes(
          steps()
        ),
        'opacity-50': steps() !== 4 && steps() !== 0
      }"
      (click)="selectStep(4)"
    >
      <div
        class="bg-primary-600 rounded-l-lg my-6 ml-6 p-2 sm:h-32 sm:w-32 flex justify-center items-center"
      >
        <icon-gears-animation class="w-3/5 h-3/5 fill-white" />
      </div>
    </div>
    <div
      [ngClass]="{
        'duration-200 cursor-pointer z-10 rounded-tl-2xl rounded-bl-2xl': true,
        'translate-y-[-15px] sm:translate-y-[-26px]': steps() === 3,
        'translate-y-[0px]': steps() === 4,
        'bg-gray-100 z-0 translate-y-[-16px] sm:translate-y-[-26px]':
          steps() === 5,
        'translate-y-[-30px] sm:translate-y-[-49px]': [0, 1, 2].includes(
          steps()
        ),
        'opacity-50': steps() !== 5 && steps() !== 0
      }"
      (click)="selectStep(5)"
    >
      <div
        class="bg-primary-700 rounded-l-lg my-6 ml-6 p-2 sm:h-32 sm:w-32 flex justify-center items-center"
      >
        <icon-box-animation class="w-3/5 h-3/5 fill-primary-700 stroke-white" />
      </div>
    </div>
  </div>

  <div
    class="bg-gray-100 h-full absolute z-[-1] w-[calc(96%-100px)] sm:w-[calc(90%-152px)] right-0 rounded-none sm:rounded-l-2xl"
  >
    <icon-circuit
      class="w-16 h-auto absolute left-0 top-4 rotate-180 fill-primary-600"
    />
    <icon-circuit
      class="w-16 h-auto absolute right-0 bottom-4 fill-primary-700"
    />
  </div>
  <div
    class="relative flex flex-col py-8 sm:py-0 w-[calc(96%-100px)] sm:w-[calc(100%-152px)] h-full items-baseline sm:items-center justify-start bg-transparent pl-8 transition-all"
  >
    @if(steps() === 0) {
    <div class="flex justify-center h-full">
      <div
        class="bg-transparent overflow-x-auto 2sm:bg-white flex items-center w-auto rounded-2xl text-xl font-thin 2sm:shadow-lg p-0 2sm:p-8 whitespace-normal 2sm:min-w-[190px]"
      >
        <p>
          Our project management process is structured in these 5 phases and
          each one has key tasks
        </p>
      </div>
    </div>
    } @else {
    <div class="flex w-full box-border flex-col items-start mb-8">
      <h2
        class="relative z-10 text-4xl rounded-lg bg-gray-50 px-3 py-1.5 font-medium text-secondary-500 hover:bg-gray-100"
      >
        Phase {{ steps() }}
      </h2>
      <h3 class="mt-3 text-2xl text-gray-500">{{ phases[steps()].title }}:</h3>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      @for (keypoint of phases[steps()].keyPoints; track $index) {
      <div
        class="2sm:bg-white justify-start flex items-center col-span-1 rounded-2xl text-xl font-thin 2sm:shadow-lg p-1 2sm:px-4 2sm:py-2 h-full w-auto 2sm:min-w-[200px] whitespace-normal"
      >
        <ul class="list-disc 2sm:list-none ml-2">
          <li class="break-words">{{ keypoint }}</li>
        </ul>
      </div>
      }
    </div>
    }
  </div>
</div>
